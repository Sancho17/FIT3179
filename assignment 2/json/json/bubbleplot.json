{ 
    "$schema": "https://vega.github.io/schema/vega-lite/v5.json", 
    "width": 1000, 
    "height": 600, 
    "title": "COVID-19 Cases per Country (13 Oct 2020)", 
    "data": { 
      "url": 
  "https://raw.githubusercontent.com/Sancho17/FIT3179/main/editedcsv.csv" 
    }, 
    "params": [ 
      { 
        "name": "GDP_Above", 
        "value": 500, 
        "bind": { 
          "input": "range", 
          "min": 0, 
        "max": 110000, 
        "step": 1000, 
        "name": "GDP: " 
      } 
    }, 
    { 
      "name": "continent_selection", 
      "bind": { 
        "input": "select", 
        "options": [ 
          null, 
          "North America", 
          "South America", 
          "Europe", 
          "Africa", 
          "Asia", 
          "Oceania" 
        ], 
        "labels":[ 
          "Show All", 
          "North America", 
          "South America", 
          "Europe", 
          "Africa", 
          "Asia", 
          "Oceania" 
        ], 
        "name": "continent Selection: " 
      } 
    } 
  ], 
  "transform": [ 
    
    {"filter": "datum.GDP > GDP_Above"}, 
    {"filter": "continent_selection == null || datum.continent == continent_selection"}
    
     
    ], 
    "encoding": { 
      "x": { 
        "field": "GDP", 
        "type": "quantitative", 
        "title": "Confirmed Cases", 
        "axis": {"tickCount": 5}, 
        "scale": {"type": "linear", "domain": [0, 100000]} 
      }, 
      "y": { 
        "field": "lifeexp", 
        "type": "quantitative", 
        "axis": {"tickCount": 6}, 
        "scale": {"type": "linear", "domain": [50, 100]} 
      } 
    }, 
    "layer": [ 
      { 
        "selection": { 
          "continent_highlight": { 
            "type": "multi", 
            "fields": ["Continent"], 
            "bind": "legend" 
          } 
        }, 
        "mark": "circle", 
        "encoding": { 
          "size": { 
            "field": "population", 
            "type": "quantitative", 
            "scale": { 
              "type": "threshold", 
              "domain": [1000000, 10000000, 50000000, 100000000, 500000000], 
              "range": [10, 50, 150, 200, 300, 400] 
            }, 
            "legend": {"format": ".1s"} 
          }, 
          "color": { 
            "field": "continent", 
            "type": "nominal", 
            "scale": { 
              "domain": [ "North America", 
                "South America", 
                "Europe", 
                "Africa", 
                "Asia", 
                "Oceania" 
              ], 
              "range": [ 
                "#e41a1c", 
                "#984ea3", 
                "#ff7f00", 
                "#a6cee3", 
                "#377eb8", 
                "#a65628" 
              ] 
            } 
          }, 
          "opacity": { 
            "condition": {"selection": "continent_highlight", "value": 0.6}, 
            "value": 0.2 
          }, 
          "tooltip": [ 
            {"field": "Country", "type": "nominal"}, 
            {"field": "GDP", "type": "quantitative", "format": ","}
            
            
          ] 
        } 
      }, 
      { 
        "mark": { 
          "type": "text", 
          "align": "right", 
          "baseline": "middle", 
          "dx": -12, 
          "fontSize": 11.5,"fontStyle": "italic" 
        }, 
        "encoding": { 
          "text": {"field": "Country", "type": "nominal"}, 
          "color": {"value": "black"}, 
          "opacity": { 
            "condition": { 
              "test": "datum['Country'] == 'Central African Republic' || datum['Country'] == 'Singapore' || datum['Country'] == 'Australia' || datum['Country'] == 'New Zealand' || datum['Country'] == 'Italy' || datum['Country'] == 'Yemen' ||  datum['Country'] == 'United States'", 
              "value": 1 
            }, 
            "value": 0 
          }, 
          "tooltip": [ 
            {"field": "Country", "type": "nominal"}, 
            {"field": "GDP", "type": "quantitative", "format": ","}
           
            
           
            
          ] 
        } 
      } 
    ] 
  }